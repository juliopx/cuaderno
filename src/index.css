:root {
  --color-bg-primary: 0 0% 85%;
  --color-bg-secondary: 0 0% 90%;
  --color-bg-panel: hsla(0, 0%, 88%, 0.15);
  --color-text-primary: 0 0% 15%;
  --color-text-secondary: 0 0% 50%;
  /* Use HEX for accent default to allow direct override or keep HSL but ensure mix works */
  /* Actually, to support HEX override from JS, we should default these to HEX or use color-mix which handles both */
  --color-accent: #007AFF;
  /* Default blue hex */
  --color-accent-soft: color-mix(in srgb, var(--color-accent), transparent 85%);

  --color-border: 0 0% 85%;
  --color-danger: 0 84% 60%;
  --color-danger-soft: 0 84% 94%;

  --color-selection-bg: var(--color-accent);
  --color-selection-text: 0 0% 100%;
  --color-selection-hover: color-mix(in srgb, var(--color-accent), white 20%);

  --glass-bg: hsla(0, 0%, 100%, 0.1);
  --glass-border: hsla(0, 0%, 100%, 0.15);
  --glass-blur: 16px;

  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --shadow-sm: 0 2px 8px -2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.06);
}


/* Light Theme Override */
[data-theme='light'] {
  --color-bg-primary: 0 0% 85%;
  --color-bg-secondary: 0 0% 90%;
  --color-bg-panel: hsla(0, 0%, 88%, 0.15);
  --color-text-primary: 0 0% 15%;
  --color-text-secondary: 0 0% 50%;
  --color-border: 0 0% 85%;
  --glass-bg: hsla(0 0% 100% / 0.35);
}

/* Dark Theme Override */
[data-theme='dark'] {
  --color-bg-primary: 0 0% 8%;
  --color-bg-secondary: 220 15% 12%;
  --color-bg-panel: hsla(220, 15%, 16%, 0.15);
  /* Lighter than black for buttons */
  --color-text-primary: 0 0% 92%;
  --color-text-secondary: 220 10% 60%;
  --color-border: 220 15% 20%;
  --glass-bg: hsla(220, 15%, 12%, 0.2);
  --glass-border: hsla(0, 0%, 100%, 0.05);

  --color-accent: #5e92ff;
  /* Default dark blue hex or similar? Lighter blue for dark mode */
  --color-accent-soft: color-mix(in srgb, var(--color-accent), transparent 85%);
  --color-selection-bg: var(--color-accent);
  --color-selection-hover: color-mix(in srgb, var(--color-accent), black 20%);
  --color-danger: 0 84% 65%;
  --color-danger-soft: 0 84% 12%;
}


/* System Preference (Default fallback if no data-theme) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --color-bg-primary: 0 0% 8%;
    --color-bg-secondary: 220 15% 12%;
    --color-bg-panel: hsla(220, 15%, 16%, 0.15);
    --color-text-primary: 0 0% 92%;
    --color-text-secondary: 220 10% 60%;
    --color-border: 220 15% 20%;
    --glass-bg: hsla(220 15% 12% / 0.5);
    --glass-border: hsla(0 0% 100% / 0.08);

    --color-accent: #5e92ff;
    --color-accent-soft: color-mix(in srgb, var(--color-accent), transparent 85%);
    --color-selection-bg: var(--color-accent);
    --color-selection-hover: color-mix(in srgb, var(--color-accent), black 20%);
    --color-danger: 0 84% 65%;
    --color-danger-soft: 0 84% 12%;
  }

  :root:not([data-theme='light']) body {
    background-color: #141414;
  }
}




* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  background-color: #d9d9d9;
  color: hsl(var(--color-text-primary));
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  /* App-like feel */
  width: 100vw;
  height: 100vh;
}

:root:lang(ar) body,
:root:lang(ar) button,
:root:lang(ar) input,
:root:lang(ar) textarea,
:root:lang(ar) select {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  font-size: 120%;
}

#root {
  width: 100%;
  height: 100%;
  display: flex;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--color-text-secondary) / 0.2);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--color-text-secondary) / 0.4);
}

/* Dark mode overrides for Tldraw */
[data-theme='dark'] .tl-container,
[data-theme='dark'] .tl-canvas,
[data-theme='dark'] .tl-background,
[data-theme='dark'] .tl-background__inner {
  background-color: #141414 !important;
}

@media (prefers-color-scheme: dark) {

  :root:not([data-theme='light']) .tl-container,
  :root:not([data-theme='light']) .tl-canvas,
  :root:not([data-theme='light']) .tl-background,
  :root:not([data-theme='light']) .tl-background__inner {
    background-color: #141414 !important;
  }
}

/* Light mode overrides for Tldraw */
[data-theme='light'] .tl-container,
[data-theme='light'] .tl-canvas,
[data-theme='light'] .tl-background,
[data-theme='light'] .tl-background__inner {
  background-color: #d9d9d9 !important;
}

@media (prefers-color-scheme: light) {

  :root:not([data-theme='dark']) .tl-container,
  :root:not([data-theme='dark']) .tl-canvas,
  :root:not([data-theme='dark']) .tl-background,
  :root:not([data-theme='dark']) .tl-background__inner {
    background-color: #d9d9d9 !important;
  }
}

/* Hybrid strokes brightness inversion (preserving color) */
[data-theme='dark'] [class*="strokeOverlay"],
[data-theme='dark'] [class*="nameStrokes"],
[data-theme='dark'] [class*="svgOverlay"] {
  /* Use absolute black as base so invert(1) produces absolute white. */
  color: #000000 !important;
  /* Boost brightness and contrast for "almost black" -> "almost white" conversion */
  filter: invert(1) hue-rotate(180deg) brightness(1.8) contrast(1.2);
}

@media (prefers-color-scheme: dark) {

  :root:not([data-theme='light']) [class*="strokeOverlay"],
  :root:not([data-theme='light']) [class*="nameStrokes"],
  :root:not([data-theme='light']) [class*="svgOverlay"] {
    /* Use absolute black as base so invert(1) produces absolute white. */
    color: #000000 !important;
    /* Boost brightness and contrast for "almost black" -> "almost white" conversion */
    filter: invert(1) hue-rotate(180deg) brightness(1.8) contrast(1.2);
  }
}

/* Tldraw Accent Color Overrides */
.tl-theme__light,
.tl-theme__dark {
  --tl-color-selected: var(--color-accent) !important;
  --tl-color-selection-stroke: var(--color-accent) !important;
  --tl-color-selection-fill: var(--color-accent-soft) !important;
  --tl-color-hint: var(--color-accent) !important;
  --tl-color-interaction-user: var(--color-accent) !important;
}